Insertion[edit]
After inserting a node, it is necessary to check each node starting with the subject node and advancing up to the root for consistency with the invariants of AVL trees: this is called "retracing". This is achieved by considering the balance factor of each node, which is defined as the difference in heights of the left and right subtrees.
 
Pictorial description of how rotations rebalance a node in AVL tree. The numbered circles represent the nodes being rebalanced. The lettered triangles represent subtrees which are themselves balanced AVL trees. A blue number next to a node denotes possible balance factors (those in parentheses occurring only in case of deletion).
Thus the balance factor of any node of an AVL tree is in the integer range [-1,+1]. This balance factor is stored in the node, but may have to be corrected after an insertion or a deletion, which is also done during retracing. Since with a single insertion the height of an AVL subtree cannot increase by more than one, the temporarily recomputed balance factor of a node after an insertion will be in the range [-2,+2]. For each node checked, if the recomputed balance factor remains in the range [-1,+1] no rotations are necessary. However, if the recomputed balance factor becomes less than -1 or greater than +1, the subtree rooted at this node is unbalanced, and a rotation is needed.
