2.1.2 Normal Map 
A problem with this method is that it does not detect the boundaries between objects that are at the same depth, nor does it detect creases. (In more formal terms, it can only detect C0 surface discontinuities.) We can augment the silhouette edges computed with the depth map by using surface normals as well. We will do this by using a normal map, which is an image that represents the surface normal at each point on an object. The values in each of the (R; G; B) color components of a point on the normal map correspond to the (x; y; z) surface normal at that point. To compute the normal map for an object with a graphics package, we can use the following procedure [6]. First, we set the object color to white, and the material property to diffuse reflection. We then place a red light on the X axis, a green light on the Y axis, and a blue light on the Z axis, all facing the object. Additionally, we put lights with negative intensity on the opposite side of each axis. We then render the scene to produce the normal map. Each light will illuminate a point on the object in proportion to the dot product of the surface normal with the light’s axis. (If negative lights are not available, then two rendering passes will be required.) An example is shown in Figure 1(c,d). We can then detect edges in the normal map. These edges detect changes in surface orientation, and can be combined with the edges of the depth map to produce a reasonably good silhouette image (Figure 1(e)). These methods together detect C0 and C1 discontinuities in the image. 1In OpenGL, for example, the depth map can be extracted by calling glReadPixels with the GL DEPTH COMPONENT argument. 7-2 Non-Photorealistic Rendering Introduction to 3D Non-Photorealistic Rendering: Silhouettes and Outlines (a) (c) (b) (d) (e) (f) (g) Figure 1: Outline drawing with image processing. (a) Depth map. (b) Edges of the depth map. (c) Normal map. (d) Edges of the normal map. (e) The combined edge images. (f) A difficult case: folded piece of paper (g) Depth edges. (See also the Color Plates section of the course notes.)
