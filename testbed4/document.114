Computer Graphics Lecture Notes
CSC418 / CSCD18 / CSC2504 Computer Science Department University of Toronto
Version: November 24, 2006

Basic (Whitted) Ray Tracing
In basic ray tracing we assume that that the light re?ected from the surface is a combination of the re?ection computed by the Phong model, along with one component due to specular secondary re?ection. That is, the only re?ection we consider is that due to perfect mirror re?ection. We only consider perfect specular re?ection for computational ef?ciency; i.e., rather than consider secondary illumination at ¯ p from all different directions, with perfect specular re?ection we know that the only incoming light at ¯ p that will be re?ected in the direction-~ di,j will be that coming from the corresponding mirror direction (i.e., m~s = -2(~ di,j ·~n))~n + ~ di,j). We can ?nd out how much light is incoming from direction m~s be casting another ray into that direction from ¯ p and calculating the light re?ected from the ?rst surface hit. Note that we have just described a recursive ray tracer; i.e., in order to calculate the re?ectance at a hit point we need to cast more rays and compute the re?ectance at the new hit points so we can calculate the incoming light at the original hit point.
In summary, for basic (Whitted) ray tracing, the re?ectance model calculation comprises:
Copyright c
2005 David Fleet and Aaron Hertzmann 71
CSC418 / CSCD18 / CSC2504 Basic Ray Tracing
• A local model (e.g., Phong) to account for diffuse and off-axis specular re?ection (highlights) due to light sources. • An ambient term to approximate the global diffuse components. • Cast rays from ¯ p into direction m~s = -2(~ di,j·~n))~n+ ~ di,j to estimate ideal mirror re?ections due to light coming from other ojects (i.e., secondary re?ection).
For a ray r(?) = ¯ a + ?~ d which hits a surface point point ¯ p with normal ~n, the re?ectance is given by E = raIa + rdId max(0,~n·~s) + rsIs max(0,~c·m~)a + rgIspec where ra, rd, and rs are the re?ection coef?cients of the Phong model, Ia, Id, and Is are the light source intensities for the ambient, diffuse and specular terms of the Phong model, ~s is the light source direction from ¯ p, the emittant direction of interest is ~c = -~ di,j, and m~ = 2(~s·~n))~n-~s is the perfect mirror direction for the local specular re?ection. Finally, Ispec is the light obtained from the recursive ray cast into the direction m~s to ?nd secondary illumination, and rg is the re?ection coef?cient that determines the fraction of secondary illumination that is re?ected by the surface at ¯ p
11.7.2 Texture • Texture can be used to modulate diffuse and a mbient re?ection coef?cients, as with Gouraud shading. • We simply need a way to map each point on the surface to a point in texture space, as above, e.g. given an intersection point ¯ p(?*), convert into parametric form s(a,ß) and use (a,ß) to ?nd texture coordinates (µ,?). • Unlike Gouraud shading, we don't need to interpolate (µ,?) over polygons. We get a new (µ,?) for each intersection point. • Anti-aliasing and super-sampling are covered in the Distribution Ray Tracing notes.
11.7.3 Transmission/Refraction • Light that penetrates a (partially or wholly) transparent surface/material is refracted (bent), owing to a change in the speed of light in different media. • Snell's Law governs refraction: sin?1 sin?2 = c1 c2
Copyright c
2005 David Fleet and Aaron Hertzmann 72
CSC418 / CSCD18 / CSC2504 Basic Ray Tracing
• The index of refraction is the ratio of light speeds c1/c2. For example, the index of refraction for passing from air to water is cair cwater = 1.33, and for passing from air to glass, it is cair cglass = 1.8. Note: There is also a wavelength dependence. We ignore this here. • Example: - If c2 < c1, light bends towards the normal (e.g. air to water). If c2 < c1, light bends away from the normal (e.g. water to air). - The critical angle ?c, when c2 > c1, is when ?1 ? ?c and ?2 ? 90. Beyond ?c, ?1 > ?c, and total internal re?ection occurs. No light enters the material. • Remarks: - The outgoing direction is in the plane of the incoming direction and ~n. This is similar to the perfect specular direction. - When ?1 = 0, then ?2 = 0, i.e. there is no bending. • For ray tracing: - Treat global transmission like global specular, i.e. cast one ray.
- Need to keep track of the speed of light in the current medium.
